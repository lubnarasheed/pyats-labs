## Step 2. Execute Genie script with Robot


0. Run Docker container and activate your Python virtual environment inside it

```
# Run Docker container
docker run -it -v ~/genie_learning_lab:/genie_tests ciscotestautomation/pyats bash

# Once inside the Docker container, activate Python virtual environment
cd /pyats
source bin/activate

# Download editors
apt-get install vim
```

Please note: This step is optional if you still have the Docker container launched in the `intro-to-genie` lab Step #4.


1. Navigate to the /genie_tests folder and use an editor to view the script `genie_script.robot`

```
cd /genie_tests
vim genie_script.robot
```


2. Examine the contents of the script `genie_script.robot`

```
# Genie Devnet Lab-4: Execute Genie script with Robot
# ===================================================


*** Settings ***
Library        ats.robot.pyATSRobot
Library        genie.libs.robot.GenieRobot
Library        unicon.robot.UniconRobot


*** Variables ***
# Defining variables that can be used elsewhere in the test data.
${testbed}     /genie_tests/default_testbed.yaml


*** TestCases ***
# Creating testcases using available Genie, PyATS & Unicon keywords


# Connect to UUT device using CLI
connect to UUT device
    use genie testbed "${testbed}"
    connect to devices "uut"


# Execute 'show bgp all neighbors' before executing the trigger
verify Bgp neighbors before trigger
    run verification "Verify_BgpAllNeighbors" on device "uut"


# Execute TriggerClearBgpNeighbor
execute TriggerClearBgpNeighbor
    run trigger "TriggerClearBgpNeighbor" on device "uut" using alias "cli"


# Execute 'show bgp all neighbors' after executing the trigger
verify Bgp neighbors before trigger
    run verification "Verify_BgpAllNeighbors" on device "uut"
```

This is the sample flow of a Genie script. Users can customize a combination of Triggers and Verifications to create a `testcase`. All the testcases when run collectively create a test script.


3. Run this script by executing the following command and examine the output to see testcase results, HTML log report and XML output.

```
(pyats)$ robot genie_script.robot
============================================================================
Pyats
============================================================================
connect to UUT device                                               | PASS |
----------------------------------------------------------------------------
verify Bgp neighbors before trigger                                 | PASS |
----------------------------------------------------------------------------
execute TriggerClearBgpNeighbor                                     | PASS |
----------------------------------------------------------------------------
verify Bgp neighbors after trigger                                  | PASS |
----------------------------------------------------------------------------
Pyats                                                               | PASS |
4 critical tests, 4 passed, 0 failed
4 tests total, 4 passed, 0 failed
============================================================================
Output:  /current/dir/output.xml
Log:     /current/dir/log.html
Report:  /current/dir/report.html
```


#### Next Step: Execute Genie script with Easypy
